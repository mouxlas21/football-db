<!doctype html>
<html>
<head><meta charset="utf-8"><title>Competitions</title></head>
<body>
  <h1>Competitions</h1>

  <form method="get" style="margin-bottom:1rem">
    <input type="text"   name="q" value="{{ q }}" placeholder="Search by name">
    <input type="text"   name="type" value="{{ type }}" placeholder="type (league, cup, ...)">
    <input type="number" name="country_id" value="{{ country_id or '' }}" placeholder="country_id">
    <input type="number" name="organizer_ass_id" value="{{ request.query_params.get('organizer_ass_id','') }}" placeholder="organizer_ass_id">
    <button type="submit">Filter</button>
  </form>

  <ul>
    {% for comp in competitions %}
      <li>
        <a href="/competitions/{{ comp.competition_id }}">{{ comp.name }}</a>
        ({{ comp.type }})
        {% if comp.country_id and country_map.get(comp.country_id) %}
          — {{ country_map[comp.country_id].name }}
        {% endif %}
        {% if comp.organizer_ass_id and ass_map.get(comp.organizer_ass_id) %}
          — Organizer:
          <a href="/associations/{{ comp.organizer_ass_id }}">
            {{ ass_map[comp.organizer_ass_id].code }}
          </a>
        {% endif %}
      </li>
    {% endfor %}
  </ul>

  <p><a href="/">Home</a></p>
</body>
</html>
